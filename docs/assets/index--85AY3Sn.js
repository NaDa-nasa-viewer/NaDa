(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(e){if(e.ep)return;e.ep=!0;const o=n(e);fetch(e.href,o)}})();const A=(a,t)=>{const n=document.createElement("div");n.id="apod";const r=document.createElement("h2"),e=new Date;r.textContent=`Astrology Picture of the Day: ${e.toDateString()}`;const o=document.createElement("img");o.src=a.src||"https://upload.wikimedia.org/wikipedia/commons/thumb/3/33/NGC2207%2BIC2163.jpg/640px-NGC2207%2BIC2163.jpg",o.id="apod-img";const c=document.createElement("div"),s=document.createElement("h3");s.textContent=`${a.title}`||"NGC2207+IC2163";const i=document.createElement("p");i.textContent=`Credit/Copyright: ${a.copyright}`||"NASA/ESA and The Hubble Heritage Team (STScI)";const m=document.createElement("p");m.textContent=`Description: ${a.explanation}`||"Near colliding NGC 2207 and IC 2163 as seen by the NASA/ESA Hubble Space Telescope.",c.append(s,i,m),n.append(r,o,c),t.append(n)},v=document.createElement("div");v.id="main-filters";const b=(a,t,n,r,e="")=>{const o=document.createElement("div");o.className="filter";const c=document.createElement("label");c.htmlFor=t,c.textContent=n;const s=document.createElement("select");s.id=t,s.name=r;const i=document.createElement("option");i.value=e,i.textContent=e||"Any",i.selected="selected",s.append(i);for(const m of a){const p=document.createElement("option");p.value=m,p.textContent=m,s.append(p),o.append(c,s),v.append(o)}return s},N=a=>{const t=document.createElement("div");t.id="filters";const n=document.createElement("form");n.id="form";const r=document.createElement("h2");r.textContent="Search NASA Database:";const e=document.createElement("div");e.id="searchbar";const o=document.createElement("label");o.htmlFor="search",o.textContent="Custom Search: ";const c=document.createElement("input");c.type="text",c.id="search",c.name="q",c.placeholder="Search the cosmos...",e.append(o,c);const s=document.createElement("h3");s.textContent="Apply filters: ",t.append(s);const i=["MOON","STAR","JUPITER","PLANET","ASTRONAUT","ASTEROID","BLACK HOLE","HUBBLE","GALAXY","SATELLITE"].sort();b(i,"keyword-filter","Keyword: ","keywords"),b(["Bridget Caswell","Eric Bordelon","Bill Ingalls","Josh Varcarcel","Desiree Stover","Bill Stafford","Jordan Salkin","Jeff Janis","Jim Ross","Norah Moran"],"photographer-filter","Photographer: ","photographer"),b([10,30,50],"page-size-select","Image Count: ","page_size",20),t.append(v);const g=document.createElement("div");g.id="year-inputs";const u=new Date().getFullYear(),f=document.createElement("div");f.className="filter";const l=document.createElement("input");l.type="number",l.min=1920,l.max=u,l.id="year-start",l.value=1920,l.name="year_start",l.placeholder="Min: 1920";const E=document.createElement("label");E.htmlFor=l.id,E.textContent="Earliest Year: ",f.append(E,l);const y=document.createElement("div");y.className="filter";const d=document.createElement("input");d.type="number",d.min=1920,d.max=u,d.id="year-end",d.value=u,d.placeholder=`Max: ${u}`,d.name="year_end";const C=document.createElement("label");C.htmlFor=d.id,C.textContent="Latest Year: ",y.append(C,d),g.append(f,y),t.append(g);const h=document.createElement("div");h.id="buttons";const S=document.createElement("button");S.textContent="Search";const w=document.createElement("button");return w.type="reset",w.textContent="Reset Filters",h.append(S,w),n.append(r,e,t,h),a.append(n),{form:n,h2:r,searchDiv:e,filterDiv:t,buttons:h}},L=(a,t)=>{a.innerHTML="";for(const n of t){const r=document.createElement("li");r.classList.add("image");const e=document.createElement("img");e.src=n.imageUrl,e.alt=n.title,e.dataset.imageUrl=n.imageUrl,e.dataset.title=n.title,e.dataset.photographer=n.photographer??"Not Found",e.dataset.location=n.location??"Not Found",e.dataset.description=n.description??"Not Found",e.dataset.dateCreated=n.dateCreated??"Not Found",r.append(e),a.appendChild(r)}},I=(a,t)=>{a.innerHTML="";const n=document.createElement("h2");n.textContent=t.dataset.title;const r=document.createElement("h3");r.textContent=`Photographer: ${t.dataset.photographer}`;const e=document.createElement("img");e.src=t.dataset.imageUrl,e.alt=`A picture of ${t.dataset.title}`;const o=document.createElement("p");o.textContent=`Description: ${t.dataset.description}`;const c=document.createElement("p");c.textContent=`Location: ${t.dataset.location}`;const s=document.createElement("p");s.textContent=`Date: ${t.dataset.dateCreated}`,a.append(n,r,e,o,c,s)},D="https://images-api.nasa.gov/search",x=async(a="q=space",t=20)=>{try{const n=await fetch(`${D}?${a}&media_type=image`);if(!n.ok)throw new Error("Failed to get images");const{collection:r}=await n.json();console.log(r);const e=[];for(let o=0;o<t;o++){const c=r.items[o];e.push({imageUrl:await F(c.href),title:c.data[0].title,photographer:c.data[0].photographer,location:c.data[0].location,description:c.data[0].description,dateCreated:c.data[0].date_created.slice(0,10),keywords:c.data[0].keywords})}return e}catch(n){return console.warn(n),null}},F=async a=>{try{const t=await fetch(a);if(!t.ok)throw new Error("Failed to get image");const n=await t.json();return n[n.length-2]}catch(t){return console.warn(t),null}},O=async a=>{let t="";for(const[n,r]of Object.entries(a))t+=`${n}=${r.replaceAll(" ","%20")}&`;return t=t.slice(0,-1),await x(t,a.page_size)},$=async a=>{try{const t=await fetch(`https://api.nasa.gov/planetary/apod?api_key=${a}`);if(!t.ok)throw new Error("Failed to get images");const{title:n,copyright:r,hdurl:e,explanation:o}=await t.json();return console.log(o),{title:n,copyright:r,explanation:o,src:e}}catch(t){return console.warn(t),null}};var T={};const P=async a=>{a.preventDefault();const t=Object.fromEntries(new FormData(form));for(const e in t)t[e]||delete t[e];const n=document.querySelector(".image-list"),r=await O(t);console.log(t),L(n,r)};async function _(a){const t=await $(T.KEY);A(t,a),N(a);const n=document.createElement("dialog");n.classList.add("modal");const r=document.createElement("button");r.id="close-modal",r.textContent="Close";const e=document.createElement("div");e.id="modal-content",n.append(r,e),a.append(n);const o=document.createElement("ul");o.classList.add("image-list"),a.append(o);const c=document.createElement("div");c.classList.add("image-info"),a.append(c);const s=await x();console.log("images",s),L(o,s),o.addEventListener("click",async i=>{i.target.tagName==="IMG"&&I(e,i.target),n.showModal()}),r.addEventListener("click",()=>{n.close()}),form.addEventListener("submit",P)}const k=document.querySelector("#app");_(k);
